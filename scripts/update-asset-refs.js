const fs=require("fs"),path=require("path"),{glob:glob}=require("glob");async function updateAssetRefs(){const e=path.join(__dirname,"..","version.json"),s=JSON.parse(fs.readFileSync(e,"utf8")),o=await glob("**/*.html",{ignore:["node_modules/**","**/node_modules/**"],cwd:path.join(__dirname,"..")});for(const e of o){const o=path.join(__dirname,"..",e);let r=fs.readFileSync(o,"utf8");Object.entries(s.assets.css).forEach((([e,s])=>{const o=new RegExp(`href=["']([^"']*${e}\\.css)["']`,"g");r=r.replace(o,`href="$1?v=${s}"`)})),Object.entries(s.assets.js).forEach((([e,s])=>{const o=new RegExp(`src=["']([^"']*${e}\\.js)["']`,"g");r=r.replace(o,`src="$1?v=${s}"`)})),fs.writeFileSync(o,r)}console.log("Asset references updated successfully")}updateAssetRefs().catch(console.error);